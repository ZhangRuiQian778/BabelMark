为我创建一个名为 **BabelMark** 的 Markdown 翻译 Web 应用，技术栈为 **Next.js 15 (App Router) + React 18、Tailwind CSS、Radix UI、Lucide React**，并通过 **OpenAI 兼容 API**（`/v1/chat/completions`）进行翻译。请生成一个可运行的完整项目（包含代码、配置、脚本与 README）。

## 目标与核心功能

1. **Markdown → 多语言翻译**：输入/上传 `.md` 文档，输出保持排版与语法结构不变的译文。
2. **结构保持**：保留标题层级、列表、表格、引用、代码块、内联代码、链接、图片标记与 Frontmatter。
   - **永不翻译**：代码块内容、内联代码、链接 URL、图片 URL、Frontmatter 的键名。
   - **可选翻译**：链接文本、图片 alt 文本（由用户勾选）。
3. **智能分段**：按 Markdown 语法节点分段请求，避免 token 浪费与错行换段；串流合并结果。
4. **双栏视图**：左侧原文编辑器（支持拖拽上传），右侧实时预览译文；支持“对照高亮与同步滚动”。
5. **多语言**：目标语言选择器（默认 **English**；另含 中文、日语、韩语、德语…），自动检测源语言并显示。
6. **术语表 / 保护词**：用户可维护“术语固定译法”和“禁止翻译词”，翻译时严格遵循。
7. **导出**：支持一键复制、下载 `.md` 译文；批量上传时可打包 Zip 导出。
8. **模型与密钥**：支持选择模型名（默认 `gpt-4o-mini` 或其他 OpenAI 兼容模型），支持“使用本地密钥（仅保存在浏览器）”或“使用服务端代理密钥（.env）”。

## 界面与交互（Radix + Tailwind + Lucide）

- 顶栏：Logo、目标语言选择、模型选择、术语/保护词入口、设置（密钥与策略）。
- 主区：左右两栏（栅格布局）。左栏为 Markdown 输入 + 文件上传（Drag&Drop），右栏为译文预览（渲染器）。
- 工具条：
  - 「开始翻译 / 停止」按钮（含加载态、流式进度）。
  - 选项开关：翻译链接文本/图片 alt、保留空行策略、拼写纠正、标点本地化等。
  - 导出按钮：复制、下载、批量导出。
- 状态提示：Radix Toast/Tooltip；错误信息清晰（配重试）。
- 键盘快捷键：`Ctrl/Cmd+Enter` 触发翻译；`Ctrl/Cmd+S` 导出。
- 无障碍：语义化标签、焦点环、ARIA 属性、对比度合规。

## 架构与实现要点

- **解析/重组**：使用 `remark`/`rehype` 生态解析 Markdown → AST，基于节点类型（段落、标题、列表项、表格单元、blockquote 等）生成翻译片段；对代码/内联代码节点直接跳过；对链接节点仅翻译 `children`。
- **请求策略**：
  - 批量并发 + 速率限制（例如简单队列 + 延迟），减少超时和费用。
  - 采用 **SSE 流式**从服务端返回片段结果，前端按段落增量拼装。
  - 去重与重试：失败片段自动重试，最终失败以原文回退并标注。
- **服务端路由**：`/api/translate`（Next.js Route Handler）。
  - 接收：AST 片段数组、目标语言、术语/保护词、选项、模型名。
  - 组装兼容 **OpenAI Chat Completions** 的请求（`/v1/chat/completions`）。
  - 支持服务端密钥（`process.env.OPENAI_API_KEY`）和“用户提供密钥”（请求头传入）。
  - 返回：流式或一次性结果；错误码语义化。
- **提示词模板（服务端）**：
  - 系统提示：
    - 你是专业的 Markdown 翻译器，**严格保持 Markdown 结构**，禁止更改代码、链接 URL、Frontmatter 键名。
    - 遵循术语表与保护词；不可凭空添加内容；保持段内语气一致、换行位置不变。
  - 用户提示：以 **纯文本片段** 或 **简化 AST 片段** 提供，并附上「目标语言」「选项」「术语表」「保护词」。
  - 输出：仅返回对应片段译文（不包含解释）。
- **渲染**：右侧使用 `react-markdown`（或 remark+rehype）渲染译文；表格/代码高亮可选。
- **持久化**：使用 `localStorage` 记住用户设置、最近文件与术语表。
- **安全**：前端密钥仅保存在内存/IndexedDB（可选），严禁日志输出；服务端校验域名来源与速率限制。
- **国际化（UI）**：使用简单的 `i18n` 配置文件实现中英切换。
